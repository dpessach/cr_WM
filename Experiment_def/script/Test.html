<!doctype html>
<html>
  <head>
    <script src="js/jquery.min.js"></script>
    <script src="js/snap.svg-min.js"></script>
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-dotWMTask.js"></script>
    <script src="../plugins/jspsych-single-stim.js"></script>
    <link rel="stylesheet" href="../css/jspsych.css"></link>
  </head>
  <body>
    <div id="jspsych-target"></div>
  </body>
  <script>

var n_circles = 4;
var configs = [];
var stimuli = [];
var timeline = [];

//random selection of dots to show:
 for (k = 0; k < 4; k++) {
	
		var prelim_config = [0, 0, 1, 0, 1, 1, 0, 0, 1];
		var configuration = jsPsych.randomization.shuffle(prelim_config);
		
		configs.push(configuration);
		stimulus = jsPsych.plugins.dotWMTask.generate_stimulus(n_circles, configuration);
		stimuli.push(stimulus);
	



// show target stimulus using single-stim plugin
	var stim_block = {
		type: 'single-stim',
		stimulus: stimuli[k],
		is_html: true,
		timing_response: 2000,
		response_ends_trial: false
	};
	timeline.push(stim_block);

	var inter_block = {
		type: 'single-stim',
		stimulus: "blubb",
		is_html: true,
		timing_response: 2000,
		response_ends_trial: false
	};
	timeline.push(inter_block);

	var test_block = {
		type: 'dotWMTask',
		configuration: configs[k],
		editable: true,
		show_feedback: true,
		timing_feedback: 2000,
		prompt: '<p>Create the image you just saw. Click submit when you are done.</p>'
	};
	timeline.push(test_block);
};

/*
*/

jsPsych.init({
    display_element: $('#jspsych-target'),
    timeline: timeline,
    on_finish: function() {
	jsPsych.data.displayData();
	}
  });
  </script>
</html>